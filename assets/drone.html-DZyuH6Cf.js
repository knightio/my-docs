import{_ as n}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,e as s,o as t}from"./app-CHFajGP5.js";const i={};function p(r,e){return t(),a("div",null,e[0]||(e[0]=[s(`<h1 id="drone" tabindex="-1"><a class="header-anchor" href="#drone"><span>drone</span></a></h1><h2 id="与gitea-集成" tabindex="-1"><a class="header-anchor" href="#与gitea-集成"><span>与gitea 集成</span></a></h2><p>启动</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code class="language-"><span class="line"><span>docker run \\</span></span>
<span class="line"><span>  --volume=/home/data/drone/data:/data \\</span></span>
<span class="line"><span>  --env=DRONE_GITEA_SERVER=https://try.gitea.io \\</span></span>
<span class="line"><span>  --env=DRONE_GITEA_CLIENT_ID=05136e57d80189bef462 \\</span></span>
<span class="line"><span>  --env=DRONE_GITEA_CLIENT_SECRET=7c229228a77d2cbddaa61ddc78d45e \\</span></span>
<span class="line"><span>  --env=DRONE_RPC_SECRET=super-duper-secret \\</span></span>
<span class="line"><span>  --env=DRONE_SERVER_HOST=drone.company.com \\</span></span>
<span class="line"><span>  --env=DRONE_SERVER_PROTO=https </span></span>
<span class="line"><span>  --env=DRONE_USER_CREATE=username:gitea,admin:true \\</span></span>
<span class="line"><span>  --publish=9999:80 \\</span></span>
<span class="line"><span>  --restart=always \\</span></span>
<span class="line"><span>  --detach=true \\</span></span>
<span class="line"><span>  --name=drone \\</span></span>
<span class="line"><span>  drone/drone:2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li><p>DRONE_GITEA_CLIENT_ID</p><p>必填项，提供你在上一步中生成的 Gitea OAuth Client ID。</p></li><li><p>DRONE_GITEA_CLIENT_SECRET</p><p>必填项，提供你在上一步中生成的 Gitea OAuth Client Secret。</p></li><li><p>DRONE_GITEA_SERVER</p><p>必填项，提供你的 Gitea 服务器地址。例如 <a href="https://gitea.company.com" target="_blank" rel="noopener noreferrer">https://gitea.company.com</a>，注意 http(s)，否则你会看到来自 Gitea 的「不支持的协议方案（unsupported protocol scheme）」错误。</p></li><li><p>DRONE_GIT_ALWAYS_AUTH</p><p>可选项，配置值为布尔值，用于配置 Drone 在克隆公共存储库时是否进行身份验证。</p></li><li><p>DRONE_RPC_SECRET</p><p>必填项，提供在上一步中生成的共享密钥。这用于验证 Server 和 Runner 之间的 rpc 连接。必须为 Server 和 Runner 提供相同的秘密值。</p></li><li><p>DRONE_SERVER_HOST</p><p>必填项，提供你的外部主机名或 IP 地址，例如 <a href="http://drone.company.com" target="_blank" rel="noopener noreferrer">drone.company.com</a>。如果使用 IP 地址，你可以包括端口。</p></li><li><p>DRONE_SERVER_PROTO</p><p>必填项，提供你的外部协议方案。此值应设置为 http 或 https。如果你配置 ssl 或 acme，此字段默认为 https。如果你将 Drone 部署在负载均衡或带有禁止 SSL 的反向代理后面，则此值应设置为 https。</p></li><li><p>DRONE_USER_CREATE</p><p>应在启动时创建的可选用户帐户。默认帐户为管理员帐户。它可以是真实帐户（即真实的 GitHub 用户），也可以是机器帐户。</p><blockquote><p>trusted 需要登录admin账号</p></blockquote></li></ul>`,5)]))}const d=n(i,[["render",p]]),c=JSON.parse('{"path":"/linux/software/drone.html","title":"drone","lang":"zh-CN","frontmatter":{"description":"drone 与gitea 集成 启动 DRONE_GITEA_CLIENT_ID 必填项，提供你在上一步中生成的 Gitea OAuth Client ID。 DRONE_GITEA_CLIENT_SECRET 必填项，提供你在上一步中生成的 Gitea OAuth Client Secret。 DRONE_GITEA_SERVER 必填项，提供你的 ...","head":[["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"drone\\",\\"image\\":[\\"\\"],\\"dateModified\\":\\"2024-08-30T03:34:44.000Z\\",\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"憨憨十二\\",\\"url\\":\\"https://mister-hope.com\\"}]}"],["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/my-docs/linux/software/drone.html"}],["meta",{"property":"og:site_name","content":"一切为了更好的自己"}],["meta",{"property":"og:title","content":"drone"}],["meta",{"property":"og:description","content":"drone 与gitea 集成 启动 DRONE_GITEA_CLIENT_ID 必填项，提供你在上一步中生成的 Gitea OAuth Client ID。 DRONE_GITEA_CLIENT_SECRET 必填项，提供你在上一步中生成的 Gitea OAuth Client Secret。 DRONE_GITEA_SERVER 必填项，提供你的 ..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"property":"og:updated_time","content":"2024-08-30T03:34:44.000Z"}],["meta",{"property":"article:modified_time","content":"2024-08-30T03:34:44.000Z"}]]},"git":{"createdTime":1724988884000,"updatedTime":1724988884000,"contributors":[{"name":"consen3464","username":"consen3464","email":"wangkai@consen.net","commits":1,"url":"https://github.com/consen3464"}]},"readingTime":{"minutes":1.24,"words":373},"filePathRelative":"linux/software/drone.md","autoDesc":true}');export{d as comp,c as data};
